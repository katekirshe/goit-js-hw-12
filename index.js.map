{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst BASE_URL = \"https://pixabay.com/api/\";\nconst API_KEY = \"54654074-13d582212f11236cf0611e9cc\";\n\nexport async function getImagesByQuery(query, page, perPage) {\n    try {\n        const response = await axios.get(BASE_URL, {\n            params: {\n                key: API_KEY,\n                q: query,\n                page: page,\n                per_page: perPage,\n                image_type: \"photo\",\n                orientation: \"horizontal\",\n                safesearch: true\n            }\n        })\n        if (!response.data.hits.length) {\n          iziToast.error({\n              message: 'Sorry, there are no images matching your search query. Please try again!',\n              position: 'topRight'\n          });\n      }; \n      return response.data;\n    } catch (e) {\n        console.log(e);\n        iziToast.error({ \n            message: \"API error.\",\n            position: 'topRight'\n        })\n    }\n}\n","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst gallery = document.querySelector(\".gallery\");\nconst loader = document.querySelector(\".loader\");\nconst loadMore = document.querySelector(\"#load-more\");\n\nexport function createGallery(images) {\n    const galleryMarkup = images\n    .map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => {\n        return (`<li class=\"gallery-item\">\n            <a class=\"gallery-link\" href=\"${largeImageURL}\">\n                <img\n                    class=\"gallery-image\"\n                    src=\"${webformatURL}\"\n                    alt=\"${tags}\"\n                />\n                <ul class=\"card-info\">\n                    <li>\n                        <div>Likes</div>\n                        <div>${likes}</div>\n                    </li>\n                    <li> <div>Views</div>\n                        <div>${views}</div>\n                    </li>\n                    <li> <div>Comments</div>\n                        <div>${comments}</div>\n                    </li>\n                    <li> <div>Downloads</div>\n                        <div>${downloads}</div>\n                    </li>\n                </ul>\n            </a>\n        </li>`)\n    })\n    .join(\"\");\n\n\n    gallery.insertAdjacentHTML('beforeend', galleryMarkup);\n\n\n\n    const modalWindow = new SimpleLightbox('.gallery a', {\n        captionsData: 'alt',\n        captionDelay: 250,\n    });\n    modalWindow.refresh();\n};\n\n\n\nexport function clearGallery() {\n    gallery.innerHTML = \"\";\n};\n\nexport function showLoader() {\n   loader.classList.remove(\"hidden\");\n};\n\nexport function hideLoader() {\n    loader.classList.add(\"hidden\");\n};\n\nexport function showLoadButton() {\n   loadMore.classList.remove(\"hidden\");\n};\n\nexport function hideLoadButton() {\n    loadMore.classList.add(\"hidden\");\n};\n// webformatURL — посилання на маленьке зображення для списку карток у галереї\n// largeImageURL — посилання на велике зображення для модального вікна\n// tags — рядок з описом зображення. Підійде для атрибута alt\n// likes — кількість вподобайок\n// views — кількість переглядів\n// comments — кількість коментарів\n// downloads — кількість завантажень\n","import { getImagesByQuery } from \"./js/pixabay-api\";\nimport { createGallery, clearGallery, showLoader, hideLoader, showLoadButton, hideLoadButton } from \"./js/render-functions\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nlet userInputValue = \"\";\nlet page = 1;\nconst perPage = 15;\nconst form = document.querySelector(\".form\");\nconst loadMore = document.querySelector(\"#load-more\")\n\nform.addEventListener(\"submit\", async (event) => {\n    event.preventDefault();\n    userInputValue = event.target.elements[\"search-text\"].value;\n    if (!userInputValue.trim().length) {\n        iziToast.error({ \n            message: \"The field can't be empty!\",\n            position: 'topRight'\n        })\n        return \n    }\n    clearGallery();\n    page = 1;\n    await onClickListener();\n    event.target.reset()\n}) \n\nloadMore.addEventListener(\"click\", async () => {\n    page += 1;\n   await onClickListener();\n})\n\nconst onClickListener = async () => {\n    try {\n        showLoader();\n        hideLoadButton();\n        const data = await getImagesByQuery(userInputValue, page, perPage)\n        \n        if (!data.hits.length) {\n            iziToast.error({\n                message: 'Sorry, there are no images matching your search query. Please try again!',\n                position: 'topRight'\n            });\n            hideLoadButton();\n            return\n        }\n\n        if (!isLastPage(data.totalHits, page)) {\n            showLoadButton();\n        } else {\n            iziToast.info({\n                message: \"We're sorry, but you've reached the end of search results.\",\n                position: 'topRight'\n          });\n        }\n        createGallery(data.hits);\n\n        const card = document.querySelector(\".gallery-item\");\n        const cardHeight = card.getBoundingClientRect().height;\n        window.scrollBy({\n            left: 0,\n            top: cardHeight*2,\n            behavior: \"smooth\"\n        })\n        \n\n    } catch (e) {\n        console.log(e);\n        iziToast.error({\n            message: \"API error.\",\n            position: 'topRight'\n        })\n    } finally {\n       hideLoader()\n    }\n}\n\nfunction isLastPage(totalHits, page) {\n    if (totalHits <= (page * perPage)) {\n        return true\n    } return false\n}\n\n"],"names":["BASE_URL","API_KEY","getImagesByQuery","query","page","perPage","response","axios","iziToast","e","gallery","loader","loadMore","createGallery","images","galleryMarkup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","SimpleLightbox","clearGallery","showLoader","hideLoader","showLoadButton","hideLoadButton","userInputValue","form","event","onClickListener","data","isLastPage","cardHeight","totalHits"],"mappings":"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"}